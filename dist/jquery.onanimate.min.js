(function(e){function s(t,n,r){var s={addClass:"",removeClass:"",transition:false,animation:true,ms:0};n=typeof n==="object"?e.extend(s,n):s;this.settings=i.whichEvent(n);this.$el=t;if(r){this.callback=typeof r==="function"?r:function(){}}else{this.callback=typeof n==="function"?n:function(){}}this.init()}var t=null,n="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",r="webkitAnimationEnd oanimationend msAnimationEnd animationend",i;i={whichEvent:function(e){if(e.transition)e.animation=false;return e}};s.prototype.init=function(){this.getEvents();this.listenForEnd()};s.prototype.destroy=function(){this.$el.off(this.animateEvent)};s.prototype.getEvents=function(){this.animateEvent=this.settings.transition?n:r;if(this.settings.transition&&this.settings.animate)this.animateEvent=n+" "+r};s.prototype.listenForEnd=function(){var e=this;this.$el.addClass(e.settings.addClass).removeClass(e.settings.removeClass).one(e.animateEvent,function(){setTimeout(function(){e.callback.call(e.$el);e.destroy()},e.settings.ms)})};e.fn.onAnimate=function(t,n){return this.each(function(){var r=new s(e(this),t,n)})}})(jQuery)
